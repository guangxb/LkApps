//------------------------------------------------------------------------------
// <auto-generated>
//     此代码已从模板生成。
//
//     手动更改此文件可能导致应用程序出现意外的行为。
//     如果重新生成代码，将覆盖对此文件的手动更改。
// </auto-generated>
//------------------------------------------------------------------------------
using System;
using System.Collections.Generic;
using System.Linq;
using Apps.Models;
using Apps.Common;
using Microsoft.Practices.Unity;
using System.Transactions;
using Apps.Locale;
using Apps.IService.Sys;
using Apps.Models.Sys;

namespace Apps.Service.Sys
{
	public partial class SysUserConfigService
	{
		public SysUserConfigModel GetById(string type, string userId)
		{

			SysUserConfig entity = m_Rep.GetById(type, userId);
			if (entity == null)
			{
				return null;
			}
			SysUserConfigModel model = new SysUserConfigModel();
			model.Id = entity.Id;
			model.Name = entity.Name;
			model.Value = entity.Value;
			model.Type = entity.Type;
			model.State = entity.State;
			model.UserId = entity.UserId;
			return model;

		}


		//public override void Modify(ref ValidationErrors errors, SysUserConfigModel model, params string[] updateProperties)
		//{
		//        SysUserConfig entity = new SysUserConfig();
		//        if (entity == null)
		//        {
		//            errors.Add(Resource.Disable);
		//            return;
		//        }
		//        entity.Id = model.Id;
		//        entity.Name = model.Name;
		//        entity.Value = model.Value;
		//        entity.Type = model.Type;
		//        entity.State = model.State;
		//        entity.UserId = model.UserId;

		//        m_Rep.Modify(entity, updateProperties);
		//}


		public override void Create(ref ValidationErrors errors, SysUserConfigModel model)
		{
				SysUserConfig entity = m_Rep.GetById(model.Type, model.UserId);
				if (entity != null)
				{
					errors.Add(Resource.PrimaryRepeat);
					return;
				}
				entity = new SysUserConfig();
				entity.Id = ResultHelper.NewId;
				entity.Name = model.Name;
				entity.Value = model.Value;
				entity.Type = model.Type;
				entity.State = model.State;
				entity.UserId = model.UserId;

				m_Rep.Create(entity);
		}
	}
}
