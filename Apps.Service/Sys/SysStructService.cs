//------------------------------------------------------------------------------
// <auto-generated>
//     此代码已从模板生成。
//
//     手动更改此文件可能导致应用程序出现意外的行为。
//     如果重新生成代码，将覆盖对此文件的手动更改。
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Collections.Generic;
using System.Linq;
using Apps.Models;
using Microsoft.Practices.Unity;
using System.Transactions;
using Apps.Locale;
using Apps.Models.Sys;

namespace Apps.Service.Sys
{
	public partial class SysStructService: Virtual_SysStructService,Apps.IService.Sys.ISysStructService
	{
		public List<SysStructModel> GetList(string parentId)
		{
			IQueryable<SysStruct> queryData = null;
			queryData = m_Rep.GetList(a => a.ParentId == parentId).OrderBy(a => a.Sort);
			return CreateModelList(ref queryData);
		}

		public override List<SysStructModel> CreateModelList(ref IQueryable<SysStruct> queryData)
		{

			List<SysStructModel> modelList = (from r in queryData
											  select new SysStructModel
											  {
												  Id = r.Id,
												  Name = r.Name,
												  ParentId = r.ParentId,
												  Sort = r.Sort,
												  Enable = r.Enable,
												  CreateTime = r.CreateTime,
												  Higher = r.Higher,
												  Remark = r.Remark,
												  Type = "group"
											  }).ToList();
			return modelList;
		}


	}
}
